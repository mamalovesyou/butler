kind: ConfigMap
apiVersion: v1
metadata:
  name: butler-octopus-db-migration-config
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation
  labels:
    app.kubernetes.io/name: butler-octopus-db-migration-config
    app.kubernetes.io/component: config
    app.kubernetes.io/version: {{ .Chart.AppVersion }}
data:
  ENVIRONMENT: "local"
  LOGGER_LEVEL: "debug"
  LOGGER_ENCODING: "json"
  LOGGER_DISABLE_CALLER: "true"
  LOGGER_DISABLE_STACKTRACE: "false"
  POSTGRES_HOST: {{ default "postgres" .Values.services.octopus.postgres.host | quote }}
  POSTGRES_PORT: {{ default "5432" .Values.services.octopus.postgres.port | quote }}
  POSTGRES_NAME: {{ default "octopus_db" .Values.services.octopus.postgres.name | quote }}
  POSTGRES_USER: {{ default "postgres" .Values.services.octopus.postgres.user | quote }}
  POSTGRES_PASSWORD: {{ default "password" .Values.services.octopus.postgres.password | quote }}